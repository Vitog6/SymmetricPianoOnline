<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suoni con la tastiera</title>
</head>
<body>
    <h1>Premi un tasto per ascoltare la nota</h1>
    <p>Premi uno dei seguenti tasti: Q, W, E, R, T, Y, 2, 3, 4, 5, 6, 7.</p>

    <script>
        // Frequenze delle note
        const frequenze = {
            "Q": 261.63,  // Do
            "W": 293.66,  // Re
            "E": 329.63,  // Mi
            "R": 370.00,  // Fa#
            "T": 415.30,  // Sol#
            "Y": 466.16,  // La#
            "2": 277.18,  // Do#
            "3": 311.13,  // Re#
            "4": 349.23,  // Fa
            "5": 392.00,  // Sol
            "6": 440.00,  // La
            "7": 493.88   // Si
        };

        // Variabile per mantenere attivo l'AudioContext
        let audioContext;

        // Funzione per avviare l'AudioContext solo dopo un'interazione dell'utente
        function inizializzaAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Funzione per generare e riprodurre il suono della nota
        function suonaNota(frequenza) {
            inizializzaAudioContext(); // Assicurati che l'AudioContext sia inizializzato

            const oscillatore = audioContext.createOscillator();
            oscillatore.type = "sine";  // Tipo di onda (onda sinusoidale)
            oscillatore.frequency.setValueAtTime(frequenza, audioContext.currentTime);  // Impostiamo la frequenza
            oscillatore.connect(audioContext.destination);  // Collegamento al sistema audio
            oscillatore.start();
            oscillatore.stop(audioContext.currentTime + 0.5);  // La nota dura per 0.5 secondi
        }

        // Aggiungi un ascoltatore per gli eventi di pressione dei tasti
        document.addEventListener("keydown", function(event) {
            const tasto = event.key.toUpperCase(); // Ottieni il tasto premuto
            if (frequenze[tasto]) {
                suonaNota(frequenze[tasto]);  // Riproduce il suono della nota
            }
        });
        
        // Inizializzare il contesto audio al primo click sulla pagina
        document.body.addEventListener("click", inizializzaAudioContext);
    </script>
</body>
</html>
