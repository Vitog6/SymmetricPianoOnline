<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Virtuale</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            flex-direction: column;
        }

        .message {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .piano {
            display: flex;
            justify-content: center;
            position: relative;
        }

        .white-key, .black-key {
            border: 1px solid black;
            display: inline-block;
            height: 200px;
            transition: background-color 0.1s ease;
        }

        .white-key {
            width: 40px;
            background-color: white;
            position: relative;
            z-index: 1;
        }

        .black-key {
            width: 30px;
            height: 120px;
            background-color: black;
            position: absolute;
            margin-left: -15px;
            margin-right: -15px;
            z-index: 2;
        }

        .white-key:active, .black-key:active {
            background-color: lightgrey;
        }

        .white-key.active, .black-key.active {
            background-color: lightblue;
        }

        .instructions {
            font-size: 16px;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="message">
        <h1>Piano Virtuale</h1>
        <p>Premi i tasti per suonare il pianoforte!</p>
    </div>

    <div class="instructions">
        <p><strong>Istruzioni:</strong></p>
        <p><strong>Mano Sinistra:</strong> A, S, D, F, G, H, J, K, L, ;, ', /</p>
        <p><strong>Mano Destra:</strong> Q, W, E, R, T, Y, U, I, O, P, [, ], \\</p>
        <p>Premi i tasti per suonare le note. Puoi anche cliccare sui tasti virtuali!</p>
    </div>

    <div class="piano">
        <!-- Mano sinistra -->
        <div id="a" class="white-key" data-note="C"></div>
        <div id="2" class="black-key" data-note="C#"></div>
        <div id="s" class="white-key" data-note="D"></div>
        <div id="3" class="black-key" data-note="D#"></div>
        <div id="d" class="white-key" data-note="E"></div>
        <div id="f" class="white-key" data-note="F"></div>
        <div id="5" class="black-key" data-note="F#"></div>
        <div id="g" class="white-key" data-note="G"></div>
        <div id="6" class="black-key" data-note="G#"></div>
        <div id="h" class="white-key" data-note="A"></div>
        <div id="7" class="black-key" data-note="A#"></div>
        <div id="j" class="white-key" data-note="B"></div>

        <!-- Mano destra -->
        <div id="q" class="white-key" data-note="C"></div>
        <div id="w" class="black-key" data-note="C#"></div>
        <div id="e" class="white-key" data-note="D"></div>
        <div id="r" class="black-key" data-note="D#"></div>
        <div id="t" class="white-key" data-note="E"></div>
        <div id="y" class="white-key" data-note="F"></div>
        <div id="u" class="black-key" data-note="F#"></div>
        <div id="i" class="white-key" data-note="G"></div>
        <div id="o" class="black-key" data-note="G#"></div>
        <div id="p" class="white-key" data-note="A"></div>
        <div id="[" class="black-key" data-note="A#"></div>
        <div id="]" class="white-key" data-note="B"></div>
    </div>

    <script>
        // Mappatura delle note
        const keyMap = {
            "a": "C", "2": "C#", "s": "D", "3": "D#", "d": "E", "f": "F", "5": "F#",
            "g": "G", "6": "G#", "h": "A", "7": "A#", "j": "B", "q": "C", "w": "C#",
            "e": "D", "r": "D#", "t": "E", "y": "F", "u": "F#", "i": "G", "o": "G#",
            "p": "A", "[": "A#", "]": "B"
        };

        // Suoni per ogni nota
        const sounds = {
            "C": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'),
            "C#": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'),
            "D": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3'),
            "D#": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3'),
            "E": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3'),
            "F": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3'),
            "F#": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3'),
            "G": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3'),
            "G#": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3'),
            "A": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3'),
            "A#": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3'),
            "B": new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3')
        };

        // Funzione per riprodurre il suono
        function playNote(note) {
            if (sounds[note]) {
                sounds[note].currentTime = 0; // Per evitare che il suono si sovrapponga
                sounds[note].play();
            }
        }

        // Funzione per illuminare i tasti
        function lightUpKey(keyElement) {
            keyElement.classList.add("active");
            setTimeout(() => {
                keyElement.classList.remove("active");
            }, 150); // Rimuove l'illuminazione dopo 150ms
        }

        // Gestisce la pressione dei tasti dalla tastiera
        document.addEventListener("keydown", function(event) {
            const note = keyMap[event.key];
            if (note) {
                playNote(note);
                
                // Trova il tasto corrispondente e accende l'illuminazione
                const keyElement = document.querySelector(`#${event.key}`);
                if (keyElement) {
                    lightUpKey(keyElement);
                }
            }
        });

        // Gestisce il clic sui tasti virtuali
        const keys = document.querySelectorAll(".white-key, .black-key");
        keys.forEach(key => {
            key.addEventListener("click", function() {
                const note = key.dataset.note;
                playNote(note);
                lightUpKey(key);
            });
        });
    </script>

</body>
</html>
